{% extends 'base.html' %}
{% block container %}
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


<!-- This is a container for the search bar -->
<!-- For now it has no action but when you search something up, there would be a route to find specific posts in the mongodb atlas database (based on usernames and titles) -->
<div class="search_container">
    <form action="">
        <input type="text" placeholder="Search..." name="search">
        <button type="submit"><i class="material-icons">search</i></button>
    </form>
</div>

<!-- This is the container for the dropdown menu -->
<!-- For now it has no action but when you click one of the filters, there would be a route to find specific tags related with certain posts -->
<div class="filter_menu">
    <button id="filterButton">Filter</button>
    <div class="filter_contents">
        <!-- Add references to filter out content -->
        <a href="">Digital Art</a>
        <a href="">Photography</a>
        <a href="">Visual Arts</a>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const filterButton = document.getElementById("filterButton");
            const filterContents = document.querySelector(".filter_contents");

            filterButton.addEventListener("click", function (e) {
                e.stopPropagation(); // Prevent the click event from propagating to the document
                filterContents.style.display = filterContents.style.display === "block" ? "none" : "block";
            });

            document.addEventListener("click", function (e) {
                if (filterContents.style.display === "block" && e.target !== filterButton) {
                    filterContents.style.display = "none";
                }
            });
        });

    </script>
</div>


<!-- Main section which shows all the posts in the database-->
<section>
    {% if artworks %}
        {% for artwork in artworks %}
        <div class="postContainer">
            <div class="profileContainer">
                <div class="artistContainer">
                    <img src="{{ artwork.profile_picture if artwork.profile_picture else url_for('static', filename='images/avatar.png') }}">
                    <span>{{artwork.username}}</span>
                </div>

                <div class="viewerContainer">
                    <button href="" class="viewerButton"><i class="material-icons">bookmark</i></button>
                    <button href="" class="viewerButton"><i class="material-icons">thumb_up</i></button>
                    <span>{{artwork.likes}}</span>
                </div>
            </div>

            <div class="artContainer">
                <img src="{{artwork.image_url}}">
            </div>

            <div class="detailsContainer">
                <div>{{artwork.post_description}}</div>
            </div>
        </div>
        {% endfor %}

    <!-- If there are no images in the database or images under a specific tag, then it will display this -->
    {% else %}
        <p style="display:flex; justify-content: center; align-items: center;">Currently no artworks posted!</p>
    {% endif %}
</section>
{% endblock %}
